# –ö–∞–∫ —Å–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ

## üìã –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ —Å–¥–∞—á–µ–π

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

- [ ] –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `docker-compose up`
- [ ] –ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (1GB —Ñ–∞–π–ª—ã)
- [ ] README —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É
- [ ] –ù–µ—Ç –∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã—Ö —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ `.gitignore`)
- [ ] –ö–æ–¥ –∑–∞–∫–æ–º–º–∏—á–µ–Ω –∏ –∑–∞–ø—É—à–µ–Ω –≤ –≤–∞—à—É –≤–µ—Ç–∫—É
- [ ] –í—Å–µ TODO –≤ —à–∞–±–ª–æ–Ω–∞—Ö —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã (–∏–ª–∏ —É–¥–∞–ª–µ–Ω—ã –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω—ã)

### –≠—Ç–∞–ø 1: –ë–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

- [ ] Spark –∫–ª–∞—Å—Ç–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- [ ] MinIO –¥–æ—Å—Ç—É–ø–µ–Ω –∏ —Å–æ–∑–¥–∞–Ω bucket
- [ ] Batch job —á–∏—Ç–∞–µ—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç JSONL —Ñ–∞–π–ª—ã
- [ ] –í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã
- [ ] –î–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∞–Ω—ã –≤ Parquet –≤ MinIO
- [ ] Spark query –≤—ã—á–∏—Å–ª—è–µ—Ç –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω—ã

### –≠—Ç–∞–ø 2: –°—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω)

- [ ] Kafka –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Producer –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ
- [ ] Spark Streaming —á–∏—Ç–∞–µ—Ç –∏–∑ Kafka
- [ ] Windowed aggregations —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –î–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ MinIO
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (Prometheus + Grafana)
- [ ] Dashboard –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏

---

## üì§ –ü—Ä–æ—Ü–µ—Å—Å —Å–¥–∞—á–∏

### 1. –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç
docker-compose down
docker-compose up -d
docker-compose ps  # –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å running

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose logs spark-batch  # –î–ª—è –≠—Ç–∞–ø–∞ 1
docker-compose logs spark-streaming  # –î–ª—è –≠—Ç–∞–ø–∞ 2 (–µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω)
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
# Windows:
.\generate-data.ps1 -Small
.\clean-data.ps1
docker-compose up spark-batch

# Linux/Mac:
make generate-data-small
make clean
docker-compose up spark-batch
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ README

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ –∫–æ—Ä–Ω–µ–≤–æ–º README –µ—Å—Ç—å:

- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Ä–µ—à–µ–Ω–∏—è
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —Ä–µ—à–µ–Ω—ã
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥ –¥–ª—è –∑–∞–ø—É—Å–∫–∞
- ‚úÖ Troubleshooting —Å–µ–∫—Ü–∏—è

### 4. –ö–æ–º–º–∏—Ç –∏ Push

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
git status

# –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ù–ï –ø–æ–ø–∞–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
git status | grep -E "\.jsonl|\.csv|data/"
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ (–∏–ª–∏ —Ç–æ–ª—å–∫–æ –≤ .gitignore)

# –°–æ–∑–¥–∞—Ç—å –∫–æ–º–º–∏—Ç —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
git commit -m "feat: implement batch processing pipeline

- Add Spark cluster configuration
- Implement batch job with data quality checks
- Add MinIO storage integration
- Implement percentile query
- Add documentation"

# Push –≤ –≤–∞—à—É –≤–µ—Ç–∫—É
git push origin feature/YOUR_NAME_STAGE1_BATCH
```

### 5. –°–æ–∑–¥–∞–Ω–∏–µ Pull Request

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ GitHub –≤ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –ù–∞–∂–º–∏—Ç–µ "New Pull Request"
3. **Base:** `main`
4. **Compare:** `feature/YOUR_NAME_STAGE1_BATCH`

**–í –æ–ø–∏—Å–∞–Ω–∏–∏ PR —É–∫–∞–∂–∏—Ç–µ:**

#### –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

```
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –±–∞—Ç—á–µ–≤—ã–π –ø–∞–π–ø–ª–∞–π–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ —Å –ø–æ–º–æ—â—å—é Spark.
```

#### –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω Spark –∫–ª–∞—Å—Ç–µ—Ä (Master + 2 Workers)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω MinIO –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω batch job —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ø—Ä–æ–±–ª–µ–º –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω Spark query –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª–µ–π
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

```
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞
```

#### –°–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

```
- –ü—Ä–æ–±–ª–µ–º–∞: (–æ–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –∫–æ—Ç–æ—Ä—É—é –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏)
  –†–µ—à–µ–Ω–∏–µ: (–æ–ø–∏—à–∏—Ç–µ –∫–∞–∫ —Ä–µ—à–∏–ª–∏)
```

#### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

```bash
# 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
make generate-data-small  # –∏–ª–∏ .\generate-data.ps1 -Small

# 2. –ó–∞–ø—É—Å–∫ –ø–∞–π–ø–ª–∞–π–Ω–∞
docker-compose up -d
docker-compose up spark-batch

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
docker-compose exec minio-client mc ls myminio/

# 4. –ó–∞–ø—É—Å–∫ query
python <your_query_script>.py
```

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ß—Ç–æ —É–ª—É—á—à–∏—Ç –≤–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ:

1. **–•–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
   - –ü–æ–¥—Ä–æ–±–Ω—ã–π README
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ
   - –û–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ edge cases:**
   - –ü—É—Å—Ç—ã–µ —Ñ–∞–π–ª—ã
   - –û—á–µ–Ω—å –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã
   - –°–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –≤ MinIO

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
   - –ú–µ—Ç—Ä–∏–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
   - –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ repartition
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è join –æ–ø–µ—Ä–∞—Ü–∏–π
   - –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

5. **–ß–∏—Å—Ç—ã–π –∫–æ–¥:**
   - –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
   - –ü–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
   - –°–ª–µ–¥–æ–≤–∞–Ω–∏–µ PEP 8 (–¥–ª—è Python)

---

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

–í–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ –±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è —É—Å–ø–µ—à–Ω—ã–º –µ—Å–ª–∏:

‚úÖ –ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç—Ä–µ–±—É–µ–º—ã–µ –∑–∞–¥–∞—á–∏  
‚úÖ –ü—Ä–æ–±–ª–µ–º—ã –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã  
‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã –∏ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω—ã  
‚úÖ –ö–æ–¥ –ø–æ–Ω—è—Ç–µ–Ω –∏ —Ö–æ—Ä–æ—à–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω  
‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É —Ä–∞–±–æ—Ç–∞—é—Ç  
‚úÖ PR –æ–ø–∏—Å–∞–Ω –ø–æ–¥—Ä–æ–±–Ω–æ  

---

**–£—Å–ø–µ—à–Ω–æ–π —Å–¥–∞—á–∏! üöÄ**
